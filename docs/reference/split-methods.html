<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Methods to split flowFrames and flowSets according to filters — split-methods • flowCore</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Methods to split flowFrames and flowSets according to filters — split-methods" />
<meta property="og:description" content="Divide a flow cytometry data set into several subset according to the
results of a filtering operation. There are also methods available to split
according to a factor variable." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flowCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.99.20</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Methods to split flowFrames and flowSets according to filters</h1>
    
    <div class="hidden name"><code>split-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Divide a flow cytometry data set into several subset according to the
results of a filtering operation. There are also methods available to split
according to a factor variable.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The splitting operation in the context of <code><a href='flowFrame-class.html'>flowFrame</a></code>s
and <code><a href='flowSet-class.html'>flowSet</a></code>s is the logical extension of subsetting.
While the latter only returns the events contained within a gate, the former
splits the data into the groups of events contained within and those not
contained within a particular gate. This concept is extremely useful in
applications where gates describe the distinction between positivity and
negativity for a particular marker.</p>
<p>The flow data structures in <code>flowCore</code> can be split into subsets on
various levels:</p>
<p><code><a href='flowFrame-class.html'>flowFrame</a></code>: row-wise splitting of the raw data. In most
cases, this will be done according to the outcome of a filtering operation,
either using a filter that identifiers more than one sub-population or by a
logical filter, in which case the data is split into two populations: "in
the filter" and "not in the filter". In addition, the data can be split
according to a factor (or a numeric or character vector that can be coerced
into a factor).</p>
<p><code><a href='flowSet-class.html'>flowSet</a></code>: can be either split into subsets of
<code><a href='flowFrame-class.html'>flowFrame</a></code>s according to a factor or a vector that can
be coerced into a factor, or each individual <code><a href='flowFrame-class.html'>flowFrame</a></code>
into subpopulations based on the <code><a href='filter-class.html'>filter</a></code>s or
<code><a href='filterResult-class.html'>filterResult</a></code>s provided as a list of equal length.</p>
<p>Splitting has a special meaning for filters that result in
<code><a href='multipleFilterResult-class.html'>multipleFilterResult</a></code>s or
<code><a href='manyFilterResult-class.html'>manyFilterResult</a></code>s, in which case simple subsetting
doesn't make much sense (there are multiple populations that are defined by
the gate and it is not clear which of those should be used for the
subsetting operation). Accordingly, splitting of multipleFilterResults
creates multiple subsets. The argument <code>population</code> can be used to
limit the output to only one or some of the resulting subsets. It takes as
values a character vector of names of the populations of interest. See the
documentation of the different filter classes on how population names can be
defined and the respective default values. For splitting of
<code><a href='logicalFilterResult-class.html'>logicalFilterResult</a></code>s, the <code>population</code> argument
can be used to set the population names since there is no reasonable default
other than the name of the gate. The content of the argument <code>prefix</code>
will be prepended to the population names and '+' or '-' are finally
appended allowing for more flexible naming schemes.</p>
<p>The default return value for any of the <code>split</code> methods is a list, but
the optional logical argument <code>flowSet</code> can be used to return a
<code><a href='flowSet-class.html'>flowSet</a></code> instead. This only applies when splitting
<code><a href='flowFrame-class.html'>flowFrame</a></code>s, splitting of <code><a href='flowSet-class.html'>flowSet</a></code>s
always results in lists of <code><a href='flowSet-class.html'>flowSet</a></code> objects.</p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    


<p><code><a href='flowFrame-class.html'>flowFrame</a></code> methods:</p>
<dl'>

<dt>split(x = "flowFrame", f = "ANY", drop = "ANY")</dt><dd><p>Catch all input and cast an
error if there is no method for <code>f</code> to dispatch to.</p></dd>

<dt>split(x = "flowFrame", f = "factor", drop = "ANY")</dt><dd><p>Split a
<code><a href='flowFrame-class.html'>flowFrame</a></code> by a factor variable. Length of <code>f</code> should be
the same as <code><a href='https://rdrr.io/r/base/nrow.html'>nrow(x)</a></code>, otherwise it will be recycled, possibly leading
to undesired outcomes. The optional argument <code>drop</code> works in the usual
way, in that it removes empty levels from the factor before splitting.</p></dd>

<dt>split(x = "flowFrame", f = "character", drop = "ANY")</dt><dd><p>Coerce <code>f</code> to a
factor and split on that.</p></dd>

<dt>split(x = "flowFrame", f = "numeric", drop = "ANY")</dt><dd><p>Coerce <code>f</code> to a
factor and split on that.</p></dd>

<dt>split(x = "flowFrame", f = "filter", drop = "ANY")</dt><dd><p>First applies the
<code><a href='filter-class.html'>filter</a></code> to the <code><a href='flowFrame-class.html'>flowFrame</a></code> and then
splits on the resulting <code><a href='filterResult-class.html'>filterResult</a></code> object.</p></dd>

<dt>split(x = "flowFrame", f = "logicalFilterResult", drop = "ANY")</dt><dd><p>Split into
the two subpopulations (in and out of the gate). The optional argument
<code>population</code> can be used to control the names of the results.</p></dd>

<dt>split(x = "flowFrame", f = "manyFilterResult", drop = "ANY")</dt><dd><p>Split into the
several subpopulations identified by the filtering operation. Instead of
returning a list, the additional logical argument codeflowSet makes the
method return an object of class <code><a href='flowSet-class.html'>flowSet</a></code>. The optional
<code>population</code> argument takes a character vector indicating the
subpopulations to use for splitting (as identified by the population name in
the <code>filterDetails</code> slot).</p></dd>

<dt>split(x = "flowFrame", f = "multipleFilterResult", drop = "ANY")</dt><dd><p>Split into
the several subpopulations identified by the filtering operation. Instead of
returning a list, the additional logical argument codeflowSet makes the
method return an object of class <code><a href='flowSet-class.html'>flowSet</a></code>. The optional
<code>population</code> argument takes a character vector indicating the
subpopulations to use for splitting (as identified by the population name in
the <code>filterDetails</code> slot). Alternatively, this can be a list of
characters, in which case the populations for each list item are collapsed
into one <code><a href='flowFrame-class.html'>flowFrame</a></code>.</p></dd>


</dl>

<p><code><a href='flowSet-class.html'>flowSet</a></code> methods:</p>
<dl'>

<dt>split(x = "flowSet", f = "ANY", drop = "ANY")</dt><dd><p>Catch all input and cast an
error if there is no method for <code>f</code> to dispatch to.</p></dd>

<dt>split(x = "flowSet", f = "factor", drop = "ANY")</dt><dd><p>Split a
<code><a href='flowSet-class.html'>flowSet</a></code> by a factor variable. Length of <code>f</code> needs to be
the same as <code><a href='https://rdrr.io/r/base/length.html'>length(x)</a></code>. The optional argument <code>drop</code> works in the
usual way, in that it removes empty levels from the factor before splitting.</p></dd>

<dt>split(x = "flowSet", f = "character", drop = "ANY")</dt><dd><p>Coerce <code>f</code> to a
factor and split on that.</p></dd>

<dt>split(x = "flowSet", f = "numeric", drop = "ANY")</dt><dd><p>Coerce <code>f</code> to a
factor and split on that.</p></dd>

<dt>split(x = "flowSet", f = "list", drop = "ANY")</dt><dd><p>Split a
<code><a href='flowSet-class.html'>flowSet</a></code> by a list of <code><a href='filterResult-class.html'>filterResult</a></code>s (as
typically returned by filtering operations on a
<code><a href='flowSet-class.html'>flowSet</a></code>). The length of the list has to be equal to the
length of the <code><a href='flowSet-class.html'>flowSet</a></code> and every list item needs to be a
<code><a href='filterResult-class.html'>filterResult</a></code> of equal class with the same parameters.
Instead of returning a list, the additional logical argument codeflowSet
makes the method return an object of class <code><a href='flowSet-class.html'>flowSet</a></code>. The
optional <code>population</code> argument takes a character vector indicating the
subpopulations to use for splitting (as identified by the population name in
the <code>filterDetails</code> slot).  Alternatively, this can be a list of
characters, in which case the populations for each list item are collapsed
into one <code><a href='flowFrame-class.html'>flowFrame</a></code>. Note that using the
<code>population</code> argument implies common population names for
all<code><a href='filterResult-class.html'>filterResult</a></code>s in the list and there will be an error
if this is not the case.</p></dd>


</dl>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>GvHD</span>)
<span class='no'>qGate</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='quadGate-class.html'>quadGate</a></span>(<span class='kw'>filterId</span><span class='kw'>=</span><span class='st'>"qg"</span>, <span class='st'>"FSC-H"</span><span class='kw'>=</span><span class='fl'>200</span>, <span class='st'>"SSC-H"</span><span class='kw'>=</span><span class='fl'>400</span>)

<span class='co'>## split a flowFrame by a filter that creates</span>
<span class='co'>## a multipleFilterResult</span>
<span class='no'>samp</span> <span class='kw'>&lt;-</span> <span class='no'>GvHD</span><span class='kw'>[[</span><span class='fl'>1</span>]]
<span class='no'>fres</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='filter-methods.html'>filter</a></span>(<span class='no'>samp</span>, <span class='no'>qGate</span>)
<span class='fu'>split</span>(<span class='no'>samp</span>, <span class='no'>qGate</span>)</div><div class='output co'>#&gt; $`FSC-Height+SSC-Height+`
#&gt; flowFrame object 's5a01 (FSC-Height+SSC-Height+)'
#&gt; with 322 cells and 8 observables:
#&gt;      name              desc range minRange maxRange
#&gt; $P1 FSC-H        FSC-Height  1024        0     1023
#&gt; $P2 SSC-H        SSC-Height  1024        0     1023
#&gt; $P3 FL1-H         CD15 FITC  1024        1    10000
#&gt; $P4 FL2-H           CD45 PE  1024        1    10000
#&gt; $P5 FL3-H        CD14 PerCP  1024        1    10000
#&gt; $P6 FL2-A              &lt;NA&gt;  1024        0     1023
#&gt; $P7 FL4-H          CD33 APC  1024        1    10000
#&gt; $P8  Time Time (51.20 sec.)  1024        0     1023
#&gt; 170 keywords are stored in the 'description' slot
#&gt; 
#&gt; $`FSC-Height-SSC-Height+`
#&gt; flowFrame object 's5a01 (FSC-Height-SSC-Height+)'
#&gt; with 55 cells and 8 observables:
#&gt;      name              desc range minRange maxRange
#&gt; $P1 FSC-H        FSC-Height  1024        0     1023
#&gt; $P2 SSC-H        SSC-Height  1024        0     1023
#&gt; $P3 FL1-H         CD15 FITC  1024        1    10000
#&gt; $P4 FL2-H           CD45 PE  1024        1    10000
#&gt; $P5 FL3-H        CD14 PerCP  1024        1    10000
#&gt; $P6 FL2-A              &lt;NA&gt;  1024        0     1023
#&gt; $P7 FL4-H          CD33 APC  1024        1    10000
#&gt; $P8  Time Time (51.20 sec.)  1024        0     1023
#&gt; 170 keywords are stored in the 'description' slot
#&gt; 
#&gt; $`FSC-Height+SSC-Height-`
#&gt; flowFrame object 's5a01 (FSC-Height+SSC-Height-)'
#&gt; with 1369 cells and 8 observables:
#&gt;      name              desc range minRange maxRange
#&gt; $P1 FSC-H        FSC-Height  1024        0     1023
#&gt; $P2 SSC-H        SSC-Height  1024        0     1023
#&gt; $P3 FL1-H         CD15 FITC  1024        1    10000
#&gt; $P4 FL2-H           CD45 PE  1024        1    10000
#&gt; $P5 FL3-H        CD14 PerCP  1024        1    10000
#&gt; $P6 FL2-A              &lt;NA&gt;  1024        0     1023
#&gt; $P7 FL4-H          CD33 APC  1024        1    10000
#&gt; $P8  Time Time (51.20 sec.)  1024        0     1023
#&gt; 170 keywords are stored in the 'description' slot
#&gt; 
#&gt; $`FSC-Height-SSC-Height-`
#&gt; flowFrame object 's5a01 (FSC-Height-SSC-Height-)'
#&gt; with 1674 cells and 8 observables:
#&gt;      name              desc range minRange maxRange
#&gt; $P1 FSC-H        FSC-Height  1024        0     1023
#&gt; $P2 SSC-H        SSC-Height  1024        0     1023
#&gt; $P3 FL1-H         CD15 FITC  1024        1    10000
#&gt; $P4 FL2-H           CD45 PE  1024        1    10000
#&gt; $P5 FL3-H        CD14 PerCP  1024        1    10000
#&gt; $P6 FL2-A              &lt;NA&gt;  1024        0     1023
#&gt; $P7 FL4-H          CD33 APC  1024        1    10000
#&gt; $P8  Time Time (51.20 sec.)  1024        0     1023
#&gt; 170 keywords are stored in the 'description' slot
#&gt; </div><div class='input'>
<span class='co'>## return a flowSet rather than a list</span>
<span class='fu'>split</span>(<span class='no'>samp</span>, <span class='no'>fres</span>, <span class='kw'>flowSet</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; A flowSet with 4 experiments.
#&gt; 
#&gt; An object of class 'AnnotatedDataFrame'
#&gt;   rowNames: FSC-Height+SSC-Height+ FSC-Height-SSC-Height+
#&gt;     FSC-Height+SSC-Height- FSC-Height-SSC-Height-
#&gt;   varLabels: name population
#&gt;   varMetadata: labelDescription
#&gt; 
#&gt;   column names:
#&gt;   FSC-H SSC-H FL1-H FL2-H FL3-H FL2-A FL4-H Time</div><div class='input'>
<span class='co'>## only keep one population</span>
<span class='fu'><a href='flowFrame-class.html'>names</a></span>(<span class='no'>fres</span>)</div><div class='output co'>#&gt; [1] "FSC-Height+SSC-Height+" "FSC-Height-SSC-Height+" "FSC-Height+SSC-Height-"
#&gt; [4] "FSC-Height-SSC-Height-"</div><div class='input'><span class='co'>##split(samp, fres, population="FSC-Height+SSC-Height+")</span>


<span class='co'>## split the whole set, only keep two populations</span>
<span class='co'>##split(GvHD, qGate, population=c("FSC-Height+SSC-Height+",</span>
<span class='co'>##"FSC-Height-SSC-Height+"))</span>

<span class='co'>## now split the flowSet according to a factor</span>
<span class='fu'>split</span>(<span class='no'>GvHD</span>, <span class='fu'>pData</span>(<span class='no'>GvHD</span>)$<span class='no'>Patient</span>)</div><div class='output co'>#&gt; $`5`
#&gt; A flowSet with 7 experiments.
#&gt; 
#&gt; An object of class 'AnnotatedDataFrame'
#&gt;   rowNames: s5a01 s5a02 ... s5a07 (7 total)
#&gt;   varLabels: Patient Visit ... split (6 total)
#&gt;   varMetadata: labelDescription
#&gt; 
#&gt;   column names:
#&gt;   FSC-H SSC-H FL1-H FL2-H FL3-H FL2-A FL4-H Time
#&gt; 
#&gt; $`6`
#&gt; A flowSet with 7 experiments.
#&gt; 
#&gt; An object of class 'AnnotatedDataFrame'
#&gt;   rowNames: s6a01 s6a02 ... s6a07 (7 total)
#&gt;   varLabels: Patient Visit ... split (6 total)
#&gt;   varMetadata: labelDescription
#&gt; 
#&gt;   column names:
#&gt;   FSC-H SSC-H FL1-H FL2-H FL3-H FL2-A FL4-H Time
#&gt; 
#&gt; $`7`
#&gt; A flowSet with 7 experiments.
#&gt; 
#&gt; An object of class 'AnnotatedDataFrame'
#&gt;   rowNames: s7a01 s7a02 ... s7a07 (7 total)
#&gt;   varLabels: Patient Visit ... split (6 total)
#&gt;   varMetadata: labelDescription
#&gt; 
#&gt;   column names:
#&gt;   FSC-H SSC-H FL1-H FL2-H FL3-H FL2-A FL4-H Time
#&gt; 
#&gt; $`9`
#&gt; A flowSet with 7 experiments.
#&gt; 
#&gt; An object of class 'AnnotatedDataFrame'
#&gt;   rowNames: s9a01 s9a02 ... s9a07 (7 total)
#&gt;   varLabels: Patient Visit ... split (6 total)
#&gt;   varMetadata: labelDescription
#&gt; 
#&gt;   column names:
#&gt;   FSC-H SSC-H FL1-H FL2-H FL3-H FL2-A FL4-H Time
#&gt; 
#&gt; $`10`
#&gt; A flowSet with 7 experiments.
#&gt; 
#&gt; An object of class 'AnnotatedDataFrame'
#&gt;   rowNames: s10a01 s10a02 ... s10a07 (7 total)
#&gt;   varLabels: Patient Visit ... split (6 total)
#&gt;   varMetadata: labelDescription
#&gt; 
#&gt;   column names:
#&gt;   FSC-H SSC-H FL1-H FL2-H FL3-H FL2-A FL4-H Time
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by B Ellis, Perry Haaland, Florian Hahne, Nathan Le Meur, Nishant Gopalakrishnan, Josef Spidlen, Mike Jiang, Greg Finak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


